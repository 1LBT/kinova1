<launch>
  <!-- Args -->
  <arg name="kinova_robotType" default="m1n6s200"/>
  <arg name="kinova_robotName" default="$(arg kinova_robotType)"/>
  <arg name="has2finger" default="true"/>
  <arg name="paused" default="false"/>
  <arg name="gui" default="true"/>
  <arg name="use_sim_time" default="true"/>
  <arg name="world" default="$(find kinova_gazebo)/worlds/ggcnn_grasping.world"/>

  <!-- Gazebo world -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" value="$(arg world)"/>
    <arg name="paused" value="$(arg paused)"/>
    <arg name="gui" value="$(arg gui)"/>
    <arg name="use_sim_time" value="$(arg use_sim_time)"/>
  </include>

  <!-- URDF for Gazebo (with wrist-mounted camera) -->
  <param name="robot_description_gazebo"
         command="$(find xacro)/xacro --inorder '$(find ggcnn_kinova_grasping)/urdf/m1n6s200_with_depth_cam.xacro'" />
  <!-- URDF for MoveIt (original model to match existing SRDF) -->
  <param name="robot_description"
         command="$(find xacro)/xacro --inorder '$(find kinova_description)/urdf/m1n6s200_standalone.xacro'" />

  <!-- Spawn Kinova arm (use Gazebo URDF with camera) -->
  <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" respawn="false" output="screen"
        args="-urdf -model $(arg kinova_robotName) -param robot_description_gazebo
              -J $(arg kinova_robotType)_joint_1 0.0
              -J $(arg kinova_robotType)_joint_2 2.6
              -J $(arg kinova_robotType)_joint_3 1.5
              -J $(arg kinova_robotType)_joint_4 -0.3
              -J $(arg kinova_robotType)_joint_5 1.2
              -J $(arg kinova_robotType)_joint_6 0.0
              -J $(arg kinova_robotType)_joint_finger_1 0.0
              -J $(arg kinova_robotType)_joint_finger_2 0.0" />
  <!-- Controllers -->
  <include file="$(find kinova_control)/launch/kinova_control.launch">
    <arg name="kinova_robotName" value="$(arg kinova_robotName)"/>
    <arg name="kinova_robotType" value="$(arg kinova_robotType)"/>
    <arg name="use_trajectory_controller" value="true"/>
    <arg name="is7dof" value="false"/>
    <arg name="has2finger" value="$(arg has2finger)"/>
  </include>

  <!-- MoveIt move_group (uses ROS control controllers for Gazebo) -->
  <include file="$(find m1n6s200_moveit_config)/launch/move_group_m1n6s200.launch">
    <arg name="gazebo_sim" value="true"/>
    <arg name="fake_execution" value="false"/>
    <arg name="allow_trajectory_execution" value="true"/>
    <arg name="joint_states_ns" value="/m1n6s200/joint_states"/>
  </include>

  <!-- No extra spawn or static TF needed; camera is attached in URDF -->

</launch>